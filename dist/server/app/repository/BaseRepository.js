/**
 * Created by Moiz.Kachwala on 15-06-2016.
 */
"use strict";
var mongoose = require("mongoose");
var RepositoryBase = (function () {
    function RepositoryBase(schemaModel) {
        this._model = schemaModel;
    }
    RepositoryBase.prototype.create = function (item, callback) {
        this._model.create(item, callback);
    };
    RepositoryBase.prototype.retrieve = function (callback) {
        this._model.find({}, callback);
    };
    RepositoryBase.prototype.update = function (_id, item, callback) {
        this._model.update({ _id: _id }, item, callback);
    };
    RepositoryBase.prototype.delete = function (_id, callback) {
        this._model.remove({ _id: this.toObjectId(_id) }, function (err) { return callback(err, null); });
    };
    RepositoryBase.prototype.findById = function (_id, callback) {
        this._model.findById(_id, callback);
    };
    RepositoryBase.prototype.findByCondition = function (cond, callback) {
        this._model.findOne(cond, callback);
    };
    RepositoryBase.prototype.toObjectId = function (_id) {
        return mongoose.Types.ObjectId.createFromHexString(_id);
    };
    return RepositoryBase;
}());
module.exports = RepositoryBase;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9yZXBvc2l0b3J5L0Jhc2VSZXBvc2l0b3J5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztHQUVHOztBQU9ILG1DQUFzQztBQUV0QztJQUlJLHdCQUFhLFdBQThDO1FBQ3ZELElBQUksQ0FBQyxNQUFNLEdBQUcsV0FBVyxDQUFDO0lBQzlCLENBQUM7SUFFRCwrQkFBTSxHQUFOLFVBQVEsSUFBTyxFQUFFLFFBQTJDO1FBQ3hELElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztJQUV2QyxDQUFDO0lBRUQsaUNBQVEsR0FBUixVQUFVLFFBQTJDO1FBQ2pELElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQTtJQUNsQyxDQUFDO0lBRUQsK0JBQU0sR0FBTixVQUFRLEdBQTRCLEVBQUUsSUFBTyxFQUFFLFFBQTJDO1FBQ3RGLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUMsR0FBRyxFQUFFLEdBQUcsRUFBQyxFQUFFLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztJQUVuRCxDQUFDO0lBRUQsK0JBQU0sR0FBTixVQUFRLEdBQVcsRUFBRSxRQUEwQztRQUMzRCxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxFQUFDLEVBQUUsVUFBQyxHQUFHLElBQUssT0FBQSxRQUFRLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxFQUFuQixDQUFtQixDQUFDLENBQUM7SUFFbEYsQ0FBQztJQUVELGlDQUFRLEdBQVIsVUFBVSxHQUFXLEVBQUUsUUFBeUM7UUFDNUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFFRCx3Q0FBZSxHQUFmLFVBQWlCLElBQVcsRUFBRSxRQUEyQztRQUNyRSxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVPLG1DQUFVLEdBQWxCLFVBQW9CLEdBQVc7UUFDM0IsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFFTCxxQkFBQztBQUFELENBdkNBLEFBdUNDLElBQUE7QUFFRCxpQkFBUyxjQUFjLENBQUMiLCJmaWxlIjoiYXBwL3JlcG9zaXRvcnkvQmFzZVJlcG9zaXRvcnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgTW9pei5LYWNod2FsYSBvbiAxNS0wNi0yMDE2LlxuICovXG5cbmltcG9ydCBJUmVhZCA9IHJlcXVpcmUoXCIuL2ludGVyZmFjZXMvUmVhZFwiKTtcbmltcG9ydCBJV3JpdGUgPSByZXF1aXJlKFwiLi9pbnRlcmZhY2VzL1dyaXRlXCIpO1xuaW1wb3J0IElIZXJvTW9kZWwgPSByZXF1aXJlKFwiLi8uLi9tb2RlbC9pbnRlcmZhY2VzL0hlcm9Nb2RlbFwiKTtcbmltcG9ydCBJVXNlck1vZGVsID0gcmVxdWlyZShcIi4vLi4vbW9kZWwvaW50ZXJmYWNlcy9Vc2VyTW9kZWxcIik7XG5cbmltcG9ydCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcblxuY2xhc3MgUmVwb3NpdG9yeUJhc2U8VCBleHRlbmRzIG1vbmdvb3NlLkRvY3VtZW50PiBpbXBsZW1lbnRzIElSZWFkPFQ+LCBJV3JpdGU8VD4ge1xuXG4gICAgcHJvdGVjdGVkIF9tb2RlbDogbW9uZ29vc2UuTW9kZWw8bW9uZ29vc2UuRG9jdW1lbnQ+O1xuXG4gICAgY29uc3RydWN0b3IgKHNjaGVtYU1vZGVsOiBtb25nb29zZS5Nb2RlbDxtb25nb29zZS5Eb2N1bWVudD4pIHtcbiAgICAgICAgdGhpcy5fbW9kZWwgPSBzY2hlbWFNb2RlbDtcbiAgICB9XG5cbiAgICBjcmVhdGUgKGl0ZW06IFQsIGNhbGxiYWNrOiAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHZvaWQpIHtcbiAgICAgICAgdGhpcy5fbW9kZWwuY3JlYXRlKGl0ZW0sIGNhbGxiYWNrKTtcblxuICAgIH1cblxuICAgIHJldHJpZXZlIChjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLmZpbmQoe30sIGNhbGxiYWNrKVxuICAgIH1cblxuICAgIHVwZGF0ZSAoX2lkOiBtb25nb29zZS5UeXBlcy5PYmplY3RJZCwgaXRlbTogVCwgY2FsbGJhY2s6IChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLl9tb2RlbC51cGRhdGUoe19pZDogX2lkfSwgaXRlbSwgY2FsbGJhY2spO1xuXG4gICAgfVxuXG4gICAgZGVsZXRlIChfaWQ6IHN0cmluZywgY2FsbGJhY2s6KGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnJlbW92ZSh7X2lkOiB0aGlzLnRvT2JqZWN0SWQoX2lkKX0sIChlcnIpID0+IGNhbGxiYWNrKGVyciwgbnVsbCkpO1xuXG4gICAgfVxuXG4gICAgZmluZEJ5SWQgKF9pZDogc3RyaW5nLCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogVCkgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLl9tb2RlbC5maW5kQnlJZCggX2lkLCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgZmluZEJ5Q29uZGl0aW9uIChjb25kOk9iamVjdCwgY2FsbGJhY2s6IChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLl9tb2RlbC5maW5kT25lKGNvbmQsIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRvT2JqZWN0SWQgKF9pZDogc3RyaW5nKSA6IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkIHtcbiAgICAgICAgcmV0dXJuIG1vbmdvb3NlLlR5cGVzLk9iamVjdElkLmNyZWF0ZUZyb21IZXhTdHJpbmcoX2lkKTtcbiAgICB9XG5cbn1cblxuZXhwb3J0ID0gUmVwb3NpdG9yeUJhc2U7Il19
